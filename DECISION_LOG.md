# Decision Log

| Date       | Decision                                                                 | Rationale                                                                                  | Related Files |
|------------|---------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|---------------|
| 2025-11-07 | Adopt `uv` for virtual env creation and dependency installs in Quick Start | Aligns documentation with the canonical pipeline plan that standardizes on `uv` tooling. | README.md     |
| 2025-11-07 | DL-001 — Canonical IPEDS Grad Phase 01 scope approved | Confirms pipeline location, raw input coverage (Winter 2023-24), and schema definition artifact. | docs/schema_canonical_ipeds_grad.md |
| 2025-11-07 | DL-002 — Phase 02 extraction uses `data/raw/ipeds/grad_rates_2004_2023.csv` | Standardizes on the consolidated DRVGR file and stores long-format output under `data/processed/2023/canonical/`. | src/pipelines/canonical/ipeds_grad/extraction.py |
| 2025-11-07 | DL-003 — Phase 03 metadata joins IPEDS 2023 institutions | Control/level/state/sector fields now derive from `data/raw/ipeds/2023/institutions.csv`; unmatched UnitIDs (18 rows) remain null and flagged for future remediation. | src/pipelines/canonical/ipeds_grad/enrich_metadata.py |
| 2025-11-07 | DL-004 — Graduation rate policy (DRV vs DFR precedence) | Prefer DRVGR columns (including `_RV` revisions) with DFR as fallback; provenance stored via `source_flag` and documented in `docs/rate_policy_ipeds_grad.md`. | docs/rate_policy_ipeds_grad.md |
| 2025-11-07 | DL-005 — Canonical IPEDS section strategy | Sidebar hosts a single “Canonical IPEDS” section where each chart slot corresponds to a canonical dataset (starting with Graduation Rates, future Pell pipeline next). Keeps alpha previews isolated from production tabs. | src/config/navigation.py |
| 2025-11-08 | DL-006 — Canonical SFA pipelines sequence | Build percent-Pell canonical dataset first (reuse grad pipeline phases), then extend the shared module to percent-federal-loans once Pell is validated. Ensures one dataset per review cycle. | docs/schema_canonical_percent_pell.md |
| 2025-11-08 | DL-007 — Federal loans pipeline mirrors Pell | After validating percent Pell outputs, reuse the same SFA module for percent federal loans with a dedicated schema + outputs before expanding UI. | docs/schema_canonical_percent_loans.md |
| 2025-11-08 | DL-008 — Canonical retention cohorts added | Transform the new `retention_rates.csv` feed into canonical long/summary outputs (full-time cohorts only) so the Streamlit explorer can showcase cohort scale trends alongside grad/Pell/loans data. | src/pipelines/canonical/ipeds_retention/, src/sections/canonical_ipeds.py |
| 2025-11-08 | DL-009 — Retention rate percentages integrated | Pair the cohort-size pipeline with a percentage-based variant using `retention_rate_pctgs.csv`, producing canonical outputs + Streamlit explorer slot for full-time retention rates (0–100%). | src/pipelines/canonical/ipeds_retention/, src/config/constants.py, src/sections/canonical_ipeds.py |
| 2025-11-08 | DL-010 — Graduation rate z-scores powered by headcount filters | Compute canonical graduation-rate z-scores per cohort year with user-selectable headcount thresholds (All/>1k/>5k/>10k) and surface them via the College Explorer UI histogram, enabling distribution context for any institution. | src/analytics/grad_zscores.py, src/sections/college_explorer.py, tests/analytics/test_grad_zscores.py |
| 2025-11-08 | DL-011 — Prefer DRV EF12 headcounts with fall enrollment fallback | Use the new IPEDS DRV EF12 12-month full-time undergraduate headcount feed for peer-size filtering, falling back to fall undergraduate enrollment when DRV coverage is missing. Surface the source in z-score captions for transparency. | data/raw/ipeds/fulltime_ug_12month_headcount.csv, src/core/data_manager.py, src/analytics/grad_zscores.py |
